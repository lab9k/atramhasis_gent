//>>built
require({cache:{"url:app/ui/widgets/templates/ConceptDetail.html":'\x3cdiv data-dojo-attach-point\x3d"conceptDetailNode"\x3e\n  \x3cdiv class\x3d"large-12 columns" style\x3d"margin-top: 20px; padding-bottom: 20px;"\x3e\n    \x3cdiv class\x3d"large-8 columns"\x3e\n      \x3ch1 data-dojo-attach-point\x3d"conceptTitleViewNode"\x3e\x3c/h1\x3e\n      \x3cspan class\x3d"concept-title-info" data-dojo-attach-point\x3d"idViewNode"\x3e\x3c/span\x3e\n      \x3cspan class\x3d"concept-title-info" data-dojo-attach-point\x3d"typeViewNode"\x3e\x3c/span\x3e\n      \x3cspan class\x3d"concept-title-info" data-dojo-attach-point\x3d"uriViewNode"\x3e\x3c/span\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"large-4 columns"\x3e\n      \x3ca href\x3d"#" class\x3d"button tiny right" data-dojo-attach-event\x3d"onClick: _deleteConcept"\x3eDELETE\x3c/a\x3e\n      \x3ca href\x3d"#" class\x3d"button tiny right" style\x3d"margin-right: 10px;" data-dojo-attach-event\x3d"onClick: _openEditDialog"\x3eEDIT\x3c/a\x3e\n      \x3cbutton href\x3d"#" class\x3d"button tiny right" style\x3d"margin-right: 10px;" data-dojo-attach-event\x3d"onClick: _openMergeDialog"\n         data-dojo-attach-point\x3d"mergeButton"\x3eMERGE\x3c/button\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3chr class\x3d"concept-hr"\x3e\n  \x3cdiv class\x3d"large-12 columns label-relation-block"\x3e\n    \x3cdiv class\x3d"large-6 columns"\x3e\n      \x3ch4 class\x3d"no-top-padding"\x3eLabels\x3c/h4\x3e\n      \x3cdl class\x3d"dllist"\x3e\n        \x3cdt\x3ePreferred labels\x3c/dt\x3e\x3cdd data-dojo-attach-point\x3d"preferredLabelsNode"\x3e\x3c/dd\x3e\n        \x3cdt\x3eAlternate labels\x3c/dt\x3e\x3cdd data-dojo-attach-point\x3d"alternateLabelsNode"\x3e\x3c/dd\x3e\n        \x3cdt\x3eHidden labels\x3c/dt\x3e\x3cdd data-dojo-attach-point\x3d"hiddenLabelsNode"\x3e\x3c/dd\x3e\n        \x3cdt\x3eSort labels\x3c/dt\x3e\x3cdd data-dojo-attach-point\x3d"sortLabelsNode"\x3e\x3c/dd\x3e\n      \x3c/dl\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"large-6 columns"\x3e\n      \x3ch4 class\x3d"no-top-padding"\x3eRelations\x3c/h4\x3e\n      \x3cdl class\x3d"dllist" data-dojo-attach-point\x3d"relationsListNode"\x3e\n      \x3c/dl\x3e\n      \x3ch4 class\x3d"no-top-padding"\x3eMatches\x3c/h4\x3e\n      \x3cdl class\x3d"dllist" data-dojo-attach-point\x3d"matchesListNode"\x3e\n      \x3c/dl\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3chr class\x3d"concept-hr"\x3e\n  \x3cdiv class\x3d"large-12 columns"\x3e\n    \x3cdiv class\x3d"large-12 columns"\x3e\n      \x3cul class\x3d"scopeNote" data-dojo-attach-point\x3d"scopeNoteNode"\x3e\n        \x3ch3\x3enotes\x3c/h3\x3e\n      \x3c/ul\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"large-12 columns"\x3e\n      \x3cul class\x3d"scopeNote" data-dojo-attach-point\x3d"sourcesNode"\x3e\n        \x3ch3\x3esources\x3c/h3\x3e\n      \x3c/ul\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e'}});
define("app/ui/widgets/ConceptDetail","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/promise/all dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dojo/json dojo/query dojo/on dojo/dom dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ConceptDetail.html ../dialogs/ConceptEditDialog dojo/NodeList-traverse".split(" "),function(w,d,f,x,c,y,D,u,E,z,F,v,A,B,C,G){return w([A,B],{templateString:C,baseClass:"concept-detail",concept:null,conceptId:null,conceptLabel:null,
scheme:null,languageController:null,listController:null,conceptSchemeController:null,_editDialog:null,postCreate:function(){this.inherited(arguments);u.set(this.mergeButton,"disabled",!0)},startup:function(){this.inherited(arguments);this._setData(this.concept)},_openEditDialog:function(a){a?a.preventDefault():null;this.emit("concept.edit",{concept:this.concept,schemeId:this.scheme})},_openMergeDialog:function(a){a?a.preventDefault():null;this.emit("concept.merge",{concept:this.concept,schemeId:this.scheme})},
_deleteConcept:function(a){a?a.preventDefault():null;this.emit("concept.delete",{concept:this.concept,schemeId:this.scheme})},_setData:function(a){this.conceptTitleViewNode.innerHTML="\x3cstrong\x3e"+this.scheme+" : "+a.label+"\x3c/strong\x3e";this.idViewNode.innerHTML="ID: "+a.id;this.typeViewNode.innerHTML="TYPE: "+a.type;this.uriViewNode.innerHTML="URI: ";c.create("a",{href:this.concept.uri,innerHTML:this.concept.uri,target:"_blank"},this.uriViewNode);if(a.labels&&0<a.label.length){var e="",h=
"",g="",k="";d.forEach(a.labels,f.hitch(this,function(a){"prefLabel"===a.type&&(e+=a.label+" ("+a.language+"), ");"altLabel"===a.type&&(h+=a.label+" ("+a.language+"), ");"hiddenLabel"===a.type&&(g+=a.label+" ("+a.language+"), ");"sortLabel"===a.type&&(k+=a.label+" ("+a.language+"), ")}));2<h.length&&(h=h.substring(0,h.length-2));2<e.length&&(e=e.substring(0,e.length-2));2<g.length&&(g=g.substring(0,g.length-2));2<k.length&&(k=k.substring(0,k.length-2));this.preferredLabelsNode.innerHTML=e;this.alternateLabelsNode.innerHTML=
h;this.hiddenLabelsNode.innerHTML=g;this.sortLabelsNode.innerHTML=k}if(a.narrower&&0<a.narrower.length){var b=c.create("dt",{innerHTML:"Narrower"},this.relationsListNode,"first"),l="";d.forEach(a.narrower,f.hitch(this,function(a){l+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<l.length&&(l=l.substring(0,l.length-2));c.create("dd",{innerHTML:l},b)}if(a.broader&&0<a.broader.length){var b=c.create("dt",{innerHTML:"Broader"},this.relationsListNode,"last"),
m="";d.forEach(a.broader,f.hitch(this,function(a){m+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<m.length&&(m=m.substring(0,m.length-2));c.create("dd",{innerHTML:m},b)}if(a.related&&0<a.related.length){var b=c.create("dt",{innerHTML:"Related"},this.relationsListNode,"last"),n="";d.forEach(a.related,f.hitch(this,function(a){n+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<n.length&&(n=n.substring(0,n.length-
2));c.create("dd",{innerHTML:n},b)}if(a.member_of&&0<a.member_of.length){var b=c.create("dt",{innerHTML:"Member of"},this.relationsListNode,"last"),p="";d.forEach(a.member_of,f.hitch(this,function(a){p+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<p.length&&(p=p.substring(0,p.length-2));c.create("dd",{innerHTML:p},b)}if(a.members&&0<a.members.length){var b=c.create("dt",{innerHTML:"Members"},this.relationsListNode,"last"),q="";d.forEach(a.members,f.hitch(this,
function(a){q+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<q.length&&(q=q.substring(0,q.length-2));c.create("dd",{innerHTML:q},b)}if(a.subordinate_arrays&&0<a.subordinate_arrays.length){var b=c.create("dt",{innerHTML:"Subordinate \x3cbr\x3earrays"},this.relationsListNode,"last"),r="";d.forEach(a.subordinate_arrays,f.hitch(this,function(a){r+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<r.length&&(r=r.substring(0,
r.length-2));c.create("dd",{innerHTML:r},b)}if(a.superordinates&&0<a.superordinates.length){var b=c.create("dt",{innerHTML:"Superordinates"},this.relationsListNode,"last"),s="";d.forEach(a.superordinates,f.hitch(this,function(a){s+='\x3ca href\x3d"'+a.uri+'" target\x3d"_blank" \x3e'+a.label+"\x3c/a\x3e ("+a.id+"), "}));2<s.length&&(s=s.substring(0,s.length-2));c.create("dd",{innerHTML:s},b)}if(a.matches){var b=a.matches,t=!1;b.broad&&0<b.broad.length&&(this._loadMatches(b.broad,"broad"),t=!0);b.narrow&&
0<b.narrow.length&&(this._loadMatches(b.narrow,"narrow"),t=!0);b.exact&&0<b.exact.length&&(this._loadMatches(b.exact,"exact"),t=!0);b.close&&0<b.close.length&&(this._loadMatches(b.close,"close"),t=!0);b.related&&0<b.related.length&&(this._loadMatches(b.related,"related"),t=!0);t&&u.set(this.mergeButton,"disabled",!1)}a.notes&&0<a.notes.length?d.forEach(a.notes,f.hitch(this,function(a){c.create("li",{lang:a.language,innerHTML:"\x3cstrong\x3e"+this._capitalize(a.type)+"\x3c/strong\x3e \x3cem\x3e("+
a.language+")\x3c/em\x3e: "+a.note},this.scopeNoteNode,"last")})):c.destroy(this.scopeNoteNode);a.sources&&0<a.sources.length?d.forEach(a.sources,f.hitch(this,function(a){c.create("li",{innerHTML:a.citation},this.sourcesNode,"last")})):c.destroy(this.sourcesNode)},_capitalize:function(a){return a[0].toUpperCase()+a.substr(1)},_loadMatches:function(a,e){var h=c.create("dt",{innerHTML:this.capitalize(e),id:e},this.matchesListNode,"last"),g=[],k=c.create("dd",{innerHTML:""},h);d.forEach(a,function(b,
d){c.create("span",{id:b,innerHTML:b+'\x26nbsp;\x3ci class\x3d"fa fa-spinner fa-pulse"\x3e\x3c/i\x3e\x26nbsp;'},k);g.push(this.conceptSchemeController.getMatch(b,e).then(f.hitch(this,function(b){var c=v.byId(b.data.uri);c.innerHTML='\x3ca href\x3d"'+b.data.uri+'" target\x3d"_blank" \x3e'+b.data.label+"\x3c/a\x3e"+(d===a.length-1?"":", ");y.set(c,"matched")}),function(a){}))},this);x(g).then(function(a){z("span:not(.matched)",v.byId(e)).forEach(function(a){c.destroy(a)})})},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)}})});
//# sourceMappingURL=ConceptDetail.js.map