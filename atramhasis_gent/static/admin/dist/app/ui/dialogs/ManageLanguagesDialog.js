//>>built
require({cache:{"url:app/ui/dialogs/templates/ManageLanguagesDialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"manageLanguagesDialog_title"\x3e\n  \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n    \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" role\x3d"heading"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon"\n          data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"Annuleren" role\x3d"button" tabIndex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"Annuleren" tabIndex\x3d"-1"\x3e\n        \x3ci class\x3d"fa fa-times"\x3e\x3c/i\x3e\x3c/span\x3e\n\t\t\x3c/span\x3e\n  \x3c/div\x3e\n  \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\n    \x3cdiv class\x3d"row"\x3e\n      \x3cdiv class\x3d"large-12 columns"\x3e\n        \x3ch5 style\x3d"margin-top: 0;"\x3eAdd a language\x3c/h5\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row"\x3e\n      \x3cdiv class\x3d"large-3 columns"\x3e\n        \x3cdiv class\x3d"placeholder-container"\x3e\n          \x3clabel for\x3d"codeInputNode-${id}"\x3eCode\x3c/label\x3e\n          \x3cinput type\x3d"text" id\x3d"codeInputNode-${id}" data-dojo-attach-point\x3d"codeInputNode" /\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"large-7 columns"\x3e\n        \x3cdiv class\x3d"placeholder-container"\x3e\n          \x3clabel for\x3d"nameInputNode-${id}"\x3eName\x3c/label\x3e\n          \x3cinput type\x3d"text" id\x3d"nameInputNode-${id}" data-dojo-attach-point\x3d"nameInputNode" /\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"large-2 columns" style\x3d"padding: 0;"\x3e\n        \x3ca href\x3d"#" data-dojo-attach-event\x3d"onClick: _addLangClick" data-dojo-attach-point\x3d"addButtonNode" style\x3d"float: left; height: 39px;" class\x3d"button tiny"\x3eAdd\x26nbsp;\x26nbsp;\x3ci class\x3d"fa fa-plus"\x3e\x3c/i\x3e\x3c/a\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row"\x3e\n      \x3cdiv class\x3d"large-12 columns"\x3e\n        \x3ch5 style\x3d"margin-top: 0; margin-bottom: 10px;"\x3eYou can use \x3ca href\x3d"http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry" target\x3d"_blank" style\x3d"text-decoration: underline;"\x3ethis\x3c/a\x3e list as a reference.\x3c/h5\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row"\x3e\n      \x3cdiv class\x3d"large-12 columns"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"langGridNode"\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row footerButtons"\x3e\n      \x3cdiv class\x3d"large-12 columns text-center"\x3e\n        \x3c!--?\x3ca href\x3d"#" data-dojo-attach-event\x3d"onClick: _okClick" data-dojo-attach-point\x3d"okButtonNode" class\x3d"button tiny"\x3eOK\x3c/a\x3e--\x3e\n        \x3ca href\x3d"#" data-dojo-attach-event\x3d"onClick: _cancelClick" class\x3d"button tiny"\x3eClose\x3c/a\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e'}});
define("app/ui/dialogs/ManageLanguagesDialog","dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Dialog dojo/topic dojo/_base/lang dojo/query dojo/on dojo/when dojo/_base/array dojo/dom-construct dgrid/OnDemandGrid dgrid/extensions/DijitRegistry dgrid/extensions/ColumnResizer dojo/text!./templates/ManageLanguagesDialog.html dijit/ConfirmDialog ../../utils/DomUtils ./LanguageDialog dojo/NodeList-manipulate".split(" "),function(h,m,n,p,d,e,q,f,k,l,g,r,s,t,u,v,x,w){return h([p,
m,n],{templateString:u,parentNode:null,baseClass:"manage-languages-dialog",title:"Manage languages",languageController:null,_langStore:null,_langGrid:null,postCreate:function(){this.inherited(arguments);this._langStore=this.languageController.getLanguageStore();this._langGrid=this._createGrid({collection:this._langStore},this.langGridNode);this._editLanguageDialog=new w({edit:!0});this._editLanguageDialog.startup();f(this._editLanguageDialog,"edit.language",e.hitch(this,function(c){this._editLanguage(c.language)}))},
startup:function(){this.inherited(arguments);this._langGrid.startup();this._langGrid.resize()},_createGrid:function(c,b){var a={id:{label:"ID",field:"id"},name:{label:"Name",field:"name"},actions:{label:"",renderCell:e.hitch(this,function(a){if(void 0===a.id)return null;var b=g.create("div",{"class":"dGridHyperlink"});g.create("a",{href:"#",title:"Edit language",className:"fa fa-pencil",innerHTML:"",onclick:e.hitch(this,function(b){b.preventDefault();this._showEditLanguageDialog(a)})},b);g.create("a",
{href:"#",title:"Remove language",className:"fa fa-trash",innerHTML:"",style:"margin-left: 10px;",onclick:e.hitch(this,function(b){b.preventDefault();this._removeRow(a)})},b);return b})}},a=new (h([r,s,t]))({collection:c.collection,columns:a,noDataMessage:"No languages found",loadingMessage:"Fetching data.."},b);a.on("dgrid-error",function(a){});return a},hide:function(){this.inherited(arguments)},show:function(){this.inherited(arguments);this._reset()},_addLangClick:function(c){c.preventDefault();
this._validate()?k(this._langStore.add({id:this.codeInputNode.value,name:this.nameInputNode.value})).then(e.hitch(this,function(b){d.publish("dGrowl","New language added: "+b.name,{title:"Languages",sticky:!1,channel:"info"});this.languageController.updateLanguageStore();this._langGrid.refresh();this._reset()}),function(b){b=JSON.parse(b.response.data);var a="",c=null;l.forEach(b.errors,function(b){for(c in b)a+="-\x3cem\x3e",a+=c,a+="\x3c/em\x3e: ",a+=b[c],a+="\x3cbr\x3e"});d.publish("dGrowl",a,
{title:b.message,sticky:!0,channel:"error"})}):d.publish("dGrowl","-Please fill in a language code to add a new language.",{title:"Invalid values",sticky:!0,channel:"error"})},_cancelClick:function(c){c.preventDefault();this.hide()},_reset:function(){this._langGrid.resize();this.codeInputNode.value="";this.nameInputNode.value=""},_validate:function(){return""!==this.codeInputNode.value.trim()&&""!==this.codeInputNode.value.trim()?!0:!1},_removeRow:function(c){var b=new v({title:"Delete language",
content:'\x3cp style\x3d"font-size: 15px;"\x3eAre you sure you want to remove \x3cstrong\x3e'+c.name+"\x3c/strong\x3e (ID: "+c.id+")?\x3c/p\x3e",baseClass:"confirm-dialog"});q(".dijitButton",b.domNode).addClass("button tiny");b.closeText.innerHTML='\x3ci class\x3d"fa fa-times"\x3e\x3c/i\x3e';f(b,"close",function(){b.destroy()});f(b,"execute",e.hitch(this,function(){this._langStore.remove(c.id).then(function(a){d.publish("dGrowl","Language removed: "+a.name+" ("+a.id+")",{title:"Languages",sticky:!1,
channel:"info"});this.languageController.updateLanguageStore();this._langGrid.refresh();this._reset()},function(a){(a.response&&"409"===a.response.status||409===a.response.status)&&d.publish("dGrowl",c.name+" ("+c.id+") is in use and can't be removed",{title:"Languages",sticky:!1,channel:"warn"})})}));b.show()},_showEditLanguageDialog:function(c){this._editLanguageDialog&&this._editLanguageDialog.show(c)},_editLanguage:function(c){k(this._langStore.add(c)).then(e.hitch(this,function(b){d.publish("dGrowl",
"Language edited: "+b.name,{title:"Languages",sticky:!1,channel:"info"});this.languageController.updateLanguageStore();this._langGrid.refresh();this._reset()}),function(b){b=JSON.parse(b.response.data);var a="",c=null;l.forEach(b.errors,function(b){for(c in b)a+="-\x3cem\x3e",a+=c,a+="\x3c/em\x3e: ",a+=b[c],a+="\x3cbr\x3e"});d.publish("dGrowl",a,{title:b.message,sticky:!0,channel:"error"})})}})});
//# sourceMappingURL=ManageLanguagesDialog.js.map