//>>built
define("dojo/i18n","./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(l,n,q,v,z,r,s,A,B){q.add("dojo-preload-i18n-Api",1);s=l.i18n={};var C=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,D=function(c,b,a,d){var e=[a+d];b=b.split("-");for(var p="",k=0;k<b.length;k++)if(p+=(p?"-":"")+b[k],!c||c[p])e.push(a+p+"/"+d),e.specificity=p;return e},m={},y=function(c,b,a){a=a?a.toLowerCase():l.locale;c=c.replace(/\./g,"/");b=b.replace(/\./g,"/");
return/root/i.test(a)?c+"/nls/"+b:c+"/nls/"+a+"/"+b},E=l.getL10nName=function(c,b,a){return B.id+"!"+y(c,b,a)},G=function(c,b,a,d,e,p){c([b],function(k){var f=r.clone(k.root||k.ROOT),t=D(!k._v1x&&k,e,a,d);c(t,function(){for(var a=1;a<t.length;a++)f=r.mixin(r.clone(f),arguments[a]);m[b+"/"+e]=f;f.$locale=t.specificity;p()})})},H=function(c){var b=z.extraLocale||[],b=r.isArray(b)?b:[b];b.push(c);return b},x=function(c,b,a){var d=C.exec(c),e=d[1]+"/",p=d[5]||d[4],k=e+p,f=(d=d[5]&&d[4])||l.locale||"",
t=k+"/"+f,d=d?[f]:H(f),F=d.length,h=function(){--F||a(r.delegate(m[t]))},f=c.split("*"),n="preload"==f[1];if(q("dojo-preload-i18n-Api")){n&&(m[c]||(m[c]=1,I(f[2],A.parse(f[3]),1,b)),a(1));if(!(f=n))u&&w.push([c,b,a]),f=u&&!m[t];if(f)return}else if(n){a(1);return}v.forEach(d,function(a){var c=k+"/"+a;q("dojo-preload-i18n-Api")&&g(c);m[c]?h():G(b,k,e,p,a,h)})};if(q("dojo-unit-tests"))var J=s.unitTests=[];q("dojo-preload-i18n-Api");var K=s.normalizeLocale=function(c){c=c?c.toLowerCase():l.locale;return"root"==
c?"ROOT":c},u=0,w=[],I=s._preloadLocalizations=function(c,b,a,d){function e(a,b){d([a],b)}function h(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function k(){for(--u;!u&&w.length;)x.apply(null,w.shift())}function f(a){a=K(a);h(a,function(f){if(0<=v.indexOf(b,f)){var g=c.replace(/\./g,"/")+"_"+f;u++;e(g,function(b){for(var c in b){var e=b[c],g=c.match(/(.+)\/([^\/]+)$/),l;if(g&&(l=g[2],g=g[1]+"/",e._localized)){var q;if("ROOT"===f){var s=q=e._localized;delete e._localized;
s.root=e;m[n.toAbsMid(c)]=s}else q=e._localized,m[n.toAbsMid(g+l+"/"+f)]=e;f!==a&&function(b,c,e,f){var g=[],l=[];h(a,function(a){f[a]&&(g.push(n.toAbsMid(b+a+"/"+c)),l.push(n.toAbsMid(b+c+"/"+a)))});g.length?(u++,d(g,function(){for(var d=g.length-1;0<=d;d--)e=r.mixin(r.clone(e),arguments[d]),m[l[d]]=e;m[n.toAbsMid(b+c+"/"+a)]=r.clone(e);k()})):m[n.toAbsMid(b+c+"/"+a)]=e}(g,l,e,q)}}k()});return!0}return!1})}d=d||n;f();v.forEach(l.config.extraLocale,f)},g=function(){},h={},g=function(c){for(var b,
a=c.split("/"),d=l.global[a[0]],e=1;d&&e<a.length-1;d=d[a[e++]]);d&&((b=d[a[e]])||(b=d[a[e].replace(/-/g,"_")]),b&&(m[c]=b));return b};s.getLocalization=function(c,b,a){var d;c=y(c,b,a);x(c,n,function(a){d=a});return d};q("dojo-unit-tests")&&J.push(function(c){c.register("tests.i18n.unit",function(b){var a;a=(void 0)("{prop:1}",g,"nonsense",h);b.is({prop:1},a);b.is(void 0,a[1]);a=(void 0)("({prop:1})",g,"nonsense",h);b.is({prop:1},a);b.is(void 0,a[1]);a=(void 0)("{'prop-x':1}",g,"nonsense",h);b.is({"prop-x":1},
a);b.is(void 0,a[1]);a=(void 0)("({'prop-x':1})",g,"nonsense",h);b.is({"prop-x":1},a);b.is(void 0,a[1]);a=(void 0)("define({'prop-x':1})",g,"nonsense",h);b.is(h,a);b.is({"prop-x":1},h.result);a=(void 0)("define('some/module', {'prop-x':1})",g,"nonsense",h);b.is(h,a);b.is({"prop-x":1},h.result);a=(void 0)("this is total nonsense and should throw an error",g,"nonsense",h);b.is(a instanceof Error,!0)})});return r.mixin(s,{dynamic:!0,normalize:function(c,b){return/^\./.test(c)?b(c):c},load:x,cache:m,
getL10nName:E})});
//# sourceMappingURL=i18n.js.map