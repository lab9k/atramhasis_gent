//>>built
define("dojo/parser","require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(D,z,v,x,M,N,O,P,K,Q,R,E,F,L,S,T){function G(b){return eval("("+b+")")}function U(b){var a=b._nameCaseMap,f=b.prototype;if(!a||a._extendCnt<A){var a=b._nameCaseMap={},e;for(e in f)"_"!==e.charAt(0)&&(a[e.toLowerCase()]=e);a._extendCnt=A}return a}function H(b,a){var f=b.join();if(!y[f]){for(var e=
[],c=0,k=b.length;c<k;c++){var r=b[c];e[e.length]=y[r]=y[r]||v.getObject(r)||~r.indexOf("/")&&(a?a(r):D(r))}c=e.shift();y[f]=e.length?c.createSubclass?c.createSubclass(e):c.extend.apply(c,e):c}return y[f]}new Date("X");var A=0;K.after(v,"extend",function(){A++},!0);var y={},J={_clearCache:function(){A++;y={}},_functionFromScript:function(b,a){var f="",e="",c=b.getAttribute(a+"args")||b.getAttribute("args"),k=b.getAttribute("with"),c=(c||"").split(/\s*,\s*/);k&&k.length&&x.forEach(k.split(/\s*,\s*/),
function(a){f+="with("+a+"){";e+="}"});return new Function(c,f+b.innerHTML+e)},instantiate:function(b,a,f){a=a||{};f=f||{};var e=(f.scope||z._scopeName)+"Type",c="data-"+(f.scope||z._scopeName)+"-",k=c+"type",r=c+"mixins",q=[];x.forEach(b,function(b){var c=e in a?a[e]:b.getAttribute(k)||b.getAttribute(e);if(c){var f=b.getAttribute(r),c=f?[c].concat(f.split(/\s*,\s*/)):[c];q.push({node:b,types:c})}});return this._instantiate(q,a,f)},_instantiate:function(b,a,f,e){function c(b){!a._started&&!f.noStart&&
x.forEach(b,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return b}b=x.map(b,function(b){var c=b.ctor||H(b.types,f.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+b.types.join()+"'");return this.construct(c,b.node,a,f,b.scripts,b.inherited)},this);return e?Q(b).then(c):c(b)},construct:function(b,a,f,e,c,k){function r(a){u&&v.setObject(u,a);for(l=0;l<w.length;l++)K[w[l].advice||"after"](a,w[l].method,v.hitch(a,w[l].func),!0);for(l=0;l<I.length;l++)I[l].call(a);
for(l=0;l<B.length;l++)a.watch(B[l].prop,B[l].func);for(l=0;l<C.length;l++)S(a,C[l].event,C[l].func);return a}var q=b&&b.prototype;e=e||{};var n={};e.defaults&&v.mixin(n,e.defaults);k&&v.mixin(n,k);var s;F("dom-attributes-explicit")?s=a.attributes:F("dom-attributes-specified-flag")?s=x.filter(a.attributes,function(a){return a.specified}):(k=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,
""),s=x.map(k.split(/\s+/),function(b){var c=b.toLowerCase();return{name:b,value:"LI"==a.nodeName&&"value"==b||"enctype"==c?a.getAttribute(c):a.getAttributeNode(c).value}}));var h=e.scope||z._scopeName;k="data-"+h+"-";var d={};"dojo"!==h&&(d[k+"props"]="data-dojo-props",d[k+"type"]="data-dojo-type",d[k+"mixins"]="data-dojo-mixins",d[h+"type"]="dojoType",d[k+"id"]="data-dojo-id");for(var l=0,g,h=[],u,p;g=s[l++];){var m=g.name,t=m.toLowerCase();g=g.value;switch(d[t]||t){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;
case "data-dojo-props":p=g;break;case "data-dojo-id":case "jsid":u=g;break;case "data-dojo-attach-point":case "dojoattachpoint":n.dojoAttachPoint=g;break;case "data-dojo-attach-event":case "dojoattachevent":n.dojoAttachEvent=g;break;case "class":n["class"]=a.className;break;case "style":n.style=a.style&&a.style.cssText;break;default:if(m in q||(m=U(b)[t]||m),m in q)switch(typeof q[m]){case "string":n[m]=g;break;case "number":n[m]=g.length?Number(g):NaN;break;case "boolean":n[m]="false"!=g.toLowerCase();
break;case "function":""===g||-1!=g.search(/[^\w\.]+/i)?n[m]=new Function(g):n[m]=v.getObject(g,!1)||new Function(g);h.push(m);break;default:t=q[m],n[m]=t&&"length"in t?g?g.split(/\s*,\s*/):[]:t instanceof Date?""==g?new Date(""):"now"==g?new Date:R.fromISOString(g):t instanceof P?z.baseUrl+g:G(g)}else n[m]=g}}for(s=0;s<h.length;s++)d=h[s].toLowerCase(),a.removeAttribute(d),a[d]=null;if(p)try{p=G.call(e.propsThis,"{"+p+"}"),v.mixin(n,p)}catch(y){throw Error(y.toString()+" in data-dojo-props\x3d'"+
p+"'");}v.mixin(n,f);c||(c=b&&(b._noScript||q._noScript)?[]:L("\x3e script[type^\x3d'dojo/']",a));var w=[],I=[],B=[],C=[];if(c)for(l=0;l<c.length;l++)d=c[l],a.removeChild(d),f=d.getAttribute(k+"event")||d.getAttribute("event"),e=d.getAttribute(k+"prop"),p=d.getAttribute(k+"method"),h=d.getAttribute(k+"advice"),s=d.getAttribute("type"),d=this._functionFromScript(d,k),f?"dojo/connect"==s?w.push({method:f,func:d}):"dojo/on"==s?C.push({event:f,func:d}):n[f]=d:"dojo/aspect"==s?w.push({method:p,advice:h,
func:d}):"dojo/watch"==s?B.push({prop:e,func:d}):I.push(d);b=(c=b.markupFactory||q.markupFactory)?c(n,a,b):new b(n,a);return b.then?b.then(r):r(b)},scan:function(b,a){function f(a){if(!a.inherited){a.inherited={};var b=a.node,c=f(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(s)||c.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var e=[],c=[],k={},r=(a.scope||z._scopeName)+"Type",q="data-"+(a.scope||z._scopeName)+"-",n=
q+"type",s=q+"textdir",q=q+"mixins",h=b.firstChild,d=a.inherited;if(!d){var l=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&l(a.parentNode,b)},d={dir:l(b,"dir"),lang:l(b,"lang"),textDir:l(b,s)},g;for(g in d)d[g]||delete d[g]}for(var d={inherited:d},u,p;;)if(h)if(1!=h.nodeType)h=h.nextSibling;else if(u&&"script"==h.nodeName.toLowerCase())(m=h.getAttribute("type"))&&/^dojo\/\w/i.test(m)&&u.push(h),h=h.nextSibling;else if(p)h=h.nextSibling;else{var m=h.getAttribute(n)||h.getAttribute(r);
g=h.firstChild;if(!m&&(!g||3==g.nodeType&&!g.nextSibling))h=h.nextSibling;else{p=null;if(m){var t=h.getAttribute(q);u=t?[m].concat(t.split(/\s*,\s*/)):[m];try{p=H(u,a.contextRequire)}catch(v){}p||x.forEach(u,function(a){~a.indexOf("/")&&!k[a]&&(k[a]=!0,c[c.length]=a)});t=p&&!p.prototype._noScript?[]:null;d={types:u,ctor:p,parent:d,node:h,scripts:t};d.inherited=f(d);e.push(d)}else d={node:h,scripts:u,parent:d};u=t;p=h.stopParser||p&&p.prototype.stopParser&&!a.template;h=g}}else{if(!d||!d.node)break;
h=d.node.nextSibling;p=!1;d=d.parent;u=d.scripts}var w=new E;c.length?(F("dojo-debug-messages"),(a.contextRequire||D)(c,function(){w.resolve(x.filter(e,function(b){if(!b.ctor)try{b.ctor=H(b.types,a.contextRequire)}catch(c){}for(var d=b.parent;d&&!d.types;)d=d.parent;var e=b.ctor&&b.ctor.prototype;b.instantiateChildren=!(e&&e.stopParser&&!a.template);b.instantiate=!d||d.instantiate&&d.instantiateChildren;return b.instantiate}))})):w.resolve(e);return w.promise},_require:function(b,a){var f=G("{"+b.innerHTML+
"}"),e=[],c=[],k=new E,r=a&&a.contextRequire||D,q;for(q in f)e.push(q),c.push(f[q]);r(c,function(){for(var a=0;a<e.length;a++)v.setObject(e[a],arguments[a]);k.resolve(arguments)});return k.promise},_scanAmd:function(b,a){var f=new E,e=f.promise;f.resolve(!0);var c=this;L("script[type\x3d'dojo/require']",b).forEach(function(b){e=e.then(function(){return c._require(b,a)});b.parentNode.removeChild(b)});return e},parse:function(b,a){b&&("string"!=typeof b&&!("nodeType"in b))&&(a=b,b=a.rootNode);var f=
b?N.byId(b):O.body();a=a||{};var e=a.template?{template:!0}:{},c=[],k=this,r=this._scanAmd(f,a).then(function(){return k.scan(f,a)}).then(function(b){return k._instantiate(b,e,a,!0)}).then(function(a){return c=c.concat(a)}).otherwise(function(a){throw a;});v.mixin(c,r);return c}};z.parser=J;M.parseOnLoad&&T(100,J,"parse");return J});
//# sourceMappingURL=parser.js.map